webpackJsonp([30],{"0pir":function(e,t,a){t=e.exports=a("acE3")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"tabulationEquipmentLedger.vue",sourceRoot:""}])},"4cyI":function(e,t,a){var l=a("0pir");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("FIqI")("e7e0ed78",l,!0,{})},M08u:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{attrs:{slot:"search",inline:!0},slot:"search"},[a("el-form-item",{attrs:{label:"表计编号"}},[a("el-input",{model:{value:e.meterForm.manageNo,callback:function(t){e.$set(e.meterForm,"manageNo",t)},expression:"meterForm.manageNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"表计名称"}},[a("el-input",{model:{value:e.meterForm.name,callback:function(t){e.$set(e.meterForm,"name",t)},expression:"meterForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装使用地点"}},[a("el-input",{model:{value:e.meterForm.address,callback:function(t){e.$set(e.meterForm,"address",t)},expression:"meterForm.address"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportTable}},[e._v("导出")])],1)],1),e._v(" "),a("da-table",{ref:"meterTb",staticClass:"analysis-table",attrs:{colums:e.meterColumnData,"front-page":!0,"table-list":e.meterData}})],1),e._v(" "),a("da-panel",{attrs:{title:"表计各级数量统计",width:"100%",height:"auto",border:!1,"min-height":"200px",padding:"t"}},[a("da-table",{staticClass:"analysis-table",attrs:{"show-index":!1,colums:e.meterCountColumnData,"show-summary":!0,"table-list":e.meterCountData}})],1),e._v(" "),a("da-panel",{attrs:{title:"生产厂家统计",width:"100%",height:"auto",border:!1,"min-height":"200px",padding:"t"}},[a("da-table",{staticClass:"analysis-table",attrs:{"show-index":!1,colums:e.productCountColumnData,"show-summary":!0,"table-list":e.productCountData}})],1)],1)},r=[],n={render:l,staticRenderFns:r};t.a=n},NEKO:function(e,t,a){"use strict";t.a={data:function(){return{meterForm:{manageNo:"",name:"",address:""},meterColumnData:[{label:"管理编号",prop:"manageNo"},{label:"表计名称",prop:"name"},{label:"型号",prop:"model",displace:{}},{label:"准确度等级",prop:"accuracyLevel"},{label:"生产厂家",prop:"manufacturer"},{label:"出厂编号",prop:"manufacturerNo",width:"110px"},{label:"安装使用地点",prop:"address",width:"130px"},{label:"安装日期",prop:"installDate",format:"YYYY-MM-DD"},{label:"校验/校准日期",prop:"checkDate",format:"YYYY-MM-DD"},{label:"检定证书编号",prop:"checkNo"}],meterData:[],meterCountColumnData:[{label:"表计类型",prop:"meterType",displace:{}},{label:"合计",prop:"meterCount"},{label:"一级",prop:"level_1"},{label:"二级",prop:"level_2"},{label:"三级",prop:"level_3"}],meterCountData:[],productCountColumnData:[{label:"表计类型",prop:"energyId",displace:{}}],productCountData:[]}},methods:{loadData:function(){},getMeterTable:function(){var e=this;this.$ajax.get("rest/analysisData/meter",{params:{title:"表计查询",levels:null,orgIds:null,equipIds:null,instrumentIds:null,entEnergyIds:null,isAutoCollect:null,isStopUse:null,type:null,purposes:null,isInvented:null,energyIds:null,isAll:!0,isCount:!1,groupBys:1e9}}).then(function(t){t.data.status&&(e.meterData=t.data.records)})},getMeterCountData:function(){var e=this;this.$ajax.get("rest/analysisData/meter",{params:{title:"表计各级数量统计",levels:null,orgIds:null,equipIds:null,instrumentIds:null,entEnergyIds:null,isAutoCollect:null,isStopUse:null,type:null,purposes:null,isInvented:null,energyIds:null,isAll:!1,isCount:!0,groupBys:"0100100000"}}).then(function(t){if(t.data.status){var a=[],l=[];e.$each(t.data.records,function(e){if(e.energyId){var t=l.indexOf(e.energyId),r=e.num;-1===t&&(l.push(e.energyId),a.push({meterType:e.energyId,meterCount:0,level_1:0,level_2:0,level_3:0}),t=l.length-1),a[t]["level_"+e.grade]+=r,a[t].meterCount+=r}}),e.meterCountData=a}})},getProductCountData:function(){var e=this;this.$ajax.get("rest/analysisData/meter",{params:{title:"生产厂家统计",levels:null,orgIds:null,equipIds:null,instrumentIds:null,entEnergyIds:null,isAutoCollect:null,isStopUse:null,type:null,purposes:null,isInvented:null,energyIds:null,isAll:!1,isCount:!0,groupBys:"0000100001"}}).then(function(t){if(t.data.status){var a=[],l=[];e.$each(t.data.records,function(e){if(e.manufacturerId){-1===l.indexOf(e.manufacturerId)&&l.push({label:e.manufacturer,prop:"id_"+e.manufacturerId})}}),a=a.concat(l),e.productCountColumnData=e.productCountColumnData.concat(a);var r=[],n=[];e.$each(t.data.records,function(t){if(t.energyId){var a=n.indexOf(t.energyId);if(-1===a){n.push(t.energyId);for(var l={},s=0;s<e.productCountColumnData.length;s++){l[e.productCountColumnData[s].prop]=""}r.push(l),a=n.length-1,r[a]["id_"+t.manufacturerId]=t.num,r[a].energyId=t.energyId}}}),e.productCountData=r}})},search:function(){this.$refs.meterTb.filterData(this.meterForm)},exportTable:function(){this.$refs.meterTb.export("表计配备与台账")},getMrterType:function(){var e=this;this.$ajax.get("rest/analysisData/energy",{params:{title:null,orgIds:null,equipGroups:null,equipIds:null}}).then(function(t){if(t.data.status){for(var a={},l=0;l<t.data.records.length;l++){var r=t.data.records[l].id,n=t.data.records[l].name;a[r]=n}e.meterCountColumnData[0].displace=e.productCountColumnData[0].displace=a,e.getProductCountData()}})}},mounted:function(){this.getMrterType(),this.getMeterTable(),this.getMeterCountData()}}},uJmW:function(e,t,a){"use strict";function l(e){a("4cyI")}Object.defineProperty(t,"__esModule",{value:!0});var r=a("NEKO"),n=a("M08u"),s=a("J0+h"),o=l,u=s(r.a,n.a,o,"data-v-766e4971",null);t.default=u.exports}});
//# sourceMappingURL=30.335b57479525e91524a0.js.map