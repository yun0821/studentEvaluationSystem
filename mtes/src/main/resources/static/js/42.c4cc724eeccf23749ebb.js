webpackJsonp([42],{Jesr:function(e,a,t){"use strict";var r=t("3cXf"),o=t.n(r);a.a={name:"instrument",data:function(){return{entData:[],manufacturerData:[],energyData:[],searchForm:{formdata:{entId:"",name:"",manufacturerId:""},currentPage:1,pageSize:20},tableList:{},colsData:[{label:"表计类型名称",prop:"name",align:"left",sortable:!0},{label:"量程",prop:"maxRange",align:"left",sortable:!0},{label:"型号",prop:"model",align:"left",sortable:!0},{label:"规格",prop:"specifications",align:"left",sortable:!0},{label:"生产厂家",prop:"manufacturerId",align:"left",sortable:!0},{label:"测量精度",prop:"accuracy",align:"left",sortable:!0},{label:"准确度等级",prop:"accuracyLevel",align:"left",sortable:!0},{label:"测量范围",prop:"measureRange",align:"left",sortable:!0},{label:"计量能源",prop:"energyId",align:"left",sortable:!0},{label:"通信方式",prop:"msgType",align:"left",sortable:!0}],dialogVisible:!1,addForm:{entId:"",name:"",maxRange:"",model:"",specifications:"",manufacturerId:"",accuracy:"",accuracyLevel:"",measureRange:"",energyId:"",msgType:""},rules:this.eachValidate({entId:{required:!0},name:{required:!0,maxString:"40"},maxRange:{required:!0},model:{maxString:"20"},specifications:{maxString:"20"},manufacturerId:{},accuracy:{maxString:"20"},accuracyLevel:{maxString:"20"},measureRange:{maxString:"20"},energyId:{},msgType:{maxString:"50"}})}},computed:{title:function(){return this.addForm.id?"编辑表计类型管理":"新增表计类型管理"},urlType:function(){return this.addForm.id?"put":"post"}},watch:{},methods:{getEnt:function(){var e=this;this.$ajax.get("rest/enterprise/list").then(function(a){a.data.status&&(e.entData=a.data.records)})},getManufacturerInfo:function(){var e=this;this.$ajax.get("rest/instrument/manufacturer").then(function(a){if(a.data.status){e.manufacturerData=a.data.records;var t={};e.$each(a.data.records,function(e){t[e.id]=e.name}),e.colsData[4].displace=t}})},getEnergyInfo:function(){var e=this;this.$ajax.get("rest/instrument/energy").then(function(a){if(a.data.status){e.energyData=a.data.records;var t={};e.$each(a.data.records,function(e){t[e.id]=e.name}),e.colsData[8].displace=t}})},getTbList:function(){var e=this;this.$ajax.get("rest/instrument/page",{params:this.searchForm,loadingTarget:this.$refs.table}).then(function(a){a.data.status&&(e.tableList=a.data)})},editTb:function(e){this.dialogVisible=!0,this.addForm=JSON.parse(o()(e))},closeDialog:function(e){this.$nextTick(function(){this.$refs[e].resetFields(),this.addForm={entId:"",name:"",maxRange:"",model:"",specifications:"",manufacturerId:"",accuracy:"",accuracyLevel:"",measureRange:"",energyId:"",msgType:""}})},saveDialog:function(e){var a=this;this.$refs[e].validate(function(e){e&&a.$ajax[a.urlType]("rest/instrument",a.addForm).then(function(e){e.data.status?(a.$message.success(e.data.answerMsg),a.dialogVisible=!1,a.getTbList()):a.$message.error(e.data.answerMsg)})})},delTb:function(e){var a=this;this.$confirm("是否删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$ajax.delete("rest/instrument",{params:{id:e.id}}).then(function(e){e.data.status?(a.$message.success(e.data.answerMsg),a.getTbList()):a.$message.error(e.data.answerMsg)})})}},mounted:function(){this.getEnt(),this.getTbList(),this.getEnergyInfo(),this.getManufacturerInfo()}}},ahrZ:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Jesr"),o=t("uQOp"),l=t("J0+h"),n=l(r.a,o.a,null,null,null);a.default=n.exports},uQOp:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("da-manage-page",[t("div",{attrs:{slot:"button"},slot:"button"},[t("el-button",{attrs:{icon:"my-zengjia"},on:{click:function(a){e.dialogVisible=!0}}},[e._v("新增")])],1),e._v(" "),t("el-form",{attrs:{slot:"search",inline:!0,model:e.searchForm.formdata},slot:"search"},[t("el-form-item",{attrs:{label:"表计类型名称"}},[t("el-input",{model:{value:e.searchForm.formdata.name,callback:function(a){e.$set(e.searchForm.formdata,"name",a)},expression:"searchForm.formdata.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"生产厂家"}},[t("el-select",{attrs:{filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.searchForm.formdata.manufacturerId,callback:function(a){e.$set(e.searchForm.formdata,"manufacturerId",a)},expression:"searchForm.formdata.manufacturerId"}},e._l(e.manufacturerData,function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getTbList}},[e._v("查询")])],1)],1),e._v(" "),t("da-table",{ref:"table",attrs:{slot:"content",colums:e.colsData,"table-list":e.tableList,"search-data":e.searchForm,showSelection:!1},on:{callBack:e.getTbList},slot:"content"},[t("el-table-column",{attrs:{slot:"operation",property:"operation",label:"操作",width:"150",align:"center",fixed:"right"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.editTb(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.delTb(a.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("da-dialog",{attrs:{title:e.title,visible:e.dialogVisible},on:{"update:visible":function(a){e.dialogVisible=a},close:function(a){e.closeDialog("addForm")}}},[t("el-form",{ref:"addForm",attrs:{"label-width":"120px",model:e.addForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"表计类型名称",prop:"name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(a){e.$set(e.addForm,"name",a)},expression:"addForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"量程",prop:"maxRange"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.maxRange,callback:function(a){e.$set(e.addForm,"maxRange",a)},expression:"addForm.maxRange"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"型号",prop:"model"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.model,callback:function(a){e.$set(e.addForm,"model",a)},expression:"addForm.model"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"规格",prop:"specifications"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.specifications,callback:function(a){e.$set(e.addForm,"specifications",a)},expression:"addForm.specifications"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"生产厂家",prop:"manufacturerId"}},[t("el-select",{attrs:{filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.addForm.manufacturerId,callback:function(a){e.$set(e.addForm,"manufacturerId",a)},expression:"addForm.manufacturerId"}},e._l(e.manufacturerData,function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"测量精度",prop:"accuracy"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.accuracy,callback:function(a){e.$set(e.addForm,"accuracy",a)},expression:"addForm.accuracy"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"准确度等级",prop:"accuracyLevel"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.accuracyLevel,callback:function(a){e.$set(e.addForm,"accuracyLevel",a)},expression:"addForm.accuracyLevel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"测量范围",prop:"measureRange"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.measureRange,callback:function(a){e.$set(e.addForm,"measureRange",a)},expression:"addForm.measureRange"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"计量能源",prop:"energyId"}},[t("el-select",{attrs:{filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.addForm.energyId,callback:function(a){e.$set(e.addForm,"energyId",a)},expression:"addForm.energyId"}},e._l(e.energyData,function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"通信方式",prop:"msgType"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.msgType,callback:function(a){e.$set(e.addForm,"msgType",a)},expression:"addForm.msgType"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveDialog("addForm")}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],l={render:r,staticRenderFns:o};a.a=l}});
//# sourceMappingURL=42.c4cc724eeccf23749ebb.js.map