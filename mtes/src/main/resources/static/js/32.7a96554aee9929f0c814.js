webpackJsonp([32],{"9Xsa":function(e,a,t){a=e.exports=t("acE3")(!0),a.push([e.i,".source-div-addDialog2 .el-dialog{width:500px}.el-icon-my-xinzengziyuan{margin-right:-5px}","",{version:3,sources:["C:/vscode/ysems_webapp/src/views/platform/basic/resource.vue"],names:[],mappings:"AACA,kCACE,WAAa,CACd,AACD,0BACE,iBAAmB,CACpB",file:"resource.vue",sourcesContent:["\n.source-div-addDialog2 .el-dialog {\r\n  width: 500px;\n}\n.el-icon-my-xinzengziyuan {\r\n  margin-right: -5px;\n}\r\n"],sourceRoot:""}])},"DPT/":function(e,a,t){var r=t("9Xsa");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t("FIqI")("47583e6b",r,!0,{})},GKwg:function(e,a,t){"use strict";function r(e){t("DPT/")}Object.defineProperty(a,"__esModule",{value:!0});var o=t("wzxM"),s=t("cBxk"),i=t("J0+h"),n=r,l=i(o.a,s.a,n,null,null);a.default=l.exports},cBxk:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{staticClass:"plat-header"},[t("div",[t("el-button",{staticClass:"addBtn",attrs:{icon:"my-xinzengziyuan"},on:{click:e.showAddDialog}},[e._v("\n        新增资源\n      ")])],1),e._v(" "),t("el-form",{ref:"form",staticClass:"source-div-form",attrs:{model:e.form,inline:!0}},[t("el-form-item",{attrs:{label:"资源名称"}},[t("el-input",{staticClass:"area-input-search",model:{value:e.form.formdata.name,callback:function(a){e.$set(e.form.formdata,"name",a)},expression:"form.formdata.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"访问地址"}},[t("el-input",{model:{value:e.form.formdata.uri,callback:function(a){e.$set(e.form.formdata,"uri",a)},expression:"form.formdata.uri"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{model:{value:e.form.formdata.remark,callback:function(a){e.$set(e.form.formdata,"remark",a)},expression:"form.formdata.remark"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.requestResource}},[e._v(" 搜索")])],1)],1)],1),e._v(" "),t("da-table",{ref:"table",attrs:{colums:e.columnData,"search-data":e.form,showSelection:!1},on:{callBack:e.requestResource}},[t("el-table-column",{attrs:{slot:"operation",property:"operation",label:"操作",width:"60",align:"center"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(t){e.edit(a.row)}}},[e._v("\n          编辑\n        ")])]}}])})],1),e._v(" "),t("da-dialog",{staticClass:"source-div-addDialog2",attrs:{title:e.title,visible:e.addSourceVisible},on:{"update:visible":function(a){e.addSourceVisible=a},close:function(a){e.closeDialog("source_add2")},open:e.openDialog}},[t("el-form",{ref:"source_add2",attrs:{"label-width":"90px",model:e.addForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(a){e.$set(e.addForm,"name",a)},expression:"addForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"访问地址",prop:"uri"}},[t("el-input",{attrs:{"auto-complete":"off"},on:{change:function(a){e.urlChange(e.addForm.uri,"uri")}},nativeOn:{keydown:function(a){e.keydown(a)}},model:{value:e.addForm.uri,callback:function(a){e.$set(e.addForm,"uri",a)},expression:"addForm.uri"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"请求类型",prop:"method"}},[t("el-radio-group",{on:{change:function(a){e.urlChange(e.addForm.method,"method")}},model:{value:e.addForm.method,callback:function(a){e.$set(e.addForm,"method",a)},expression:"addForm.method"}},[t("el-radio",{attrs:{label:"GET"}}),e._v(" "),t("el-radio",{attrs:{label:"POST"}}),e._v(" "),t("el-radio",{attrs:{label:"PUT"}}),e._v(" "),t("el-radio",{attrs:{label:"DELETE"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"source-form-textarea",attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:e.addForm.remark,callback:function(a){e.$set(e.addForm,"remark",a)},expression:"addForm.remark"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveDialog("source_add2")}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.addSourceVisible=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],s={render:r,staticRenderFns:o};a.a=s},wzxM:function(e,a,t){"use strict";var r=t("3cXf"),o=t.n(r),s={name:"",uri:"",method:"GET",remark:""};a.a={name:"sourceManage",data:function(){var e=this,a=function(a,t,r){if(!t)return r(new Error("请输入资源地址"));e.flag.changeUrl&&e.flag.isOpen?e.$ajax.get("rest/module/uriIsLegal",{params:{uri:t,method:e.addForm.method},noLoading:!0}).then(function(a){if(a.data.status){if(!a.data.records)return r(new Error("资源地址重复"));r()}else{var t=a.data.answerMsg?a.data.answerMsg:"操作失败";e.$message.error(t)}}):r()},t=function(a,t,r){if(!t)return r(new Error("请输入资源类型"));e.flag.changeUrl&&e.flag.isOpen?e.$ajax.get("rest/module/uriIsLegal",{params:{uri:e.addForm.uri,method:t},noLoading:!0}).then(function(a){if(e.$refs.source_add2.validateField("uri"),!a.data)return r(new Error("资源地址重复"));r()}):r()};return{columnData:[{label:"资源名称",prop:"name",align:"left",sortable:!0},{label:"访问地址",prop:"uri",align:"left",sortable:!0},{label:"请求类型",prop:"method",sortable:!0},{label:"备注",prop:"remark",align:"left",sortable:!0}],form:{currentPage:1,pageSize:10,formdata:{name:"",uri:"",remark:""}},addForm:JSON.parse(o()(s)),options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],selectData:[],rules:{name:[{required:!0,message:"请输入资源名称",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],uri:[{required:!0,message:"请输入资源地址",trigger:"blur"},{max:200,message:"长度不能超过200个字符",trigger:"blur"},{validator:a,trigger:"blur"}],remark:[{max:100,message:"长度不能超过100个字符",trigger:"blur"}],method:[{validator:t,trigger:"change"}]},addSourceVisible:!1,isAdd:!1,textP:"",flag:{changeUrl:!1,isOpen:!1},valiOnly:{uri:"",method:""}}},methods:{requestResource:function(){var e=this;e.$ajax.get("rest/module/baseResource/page",{params:e.form,loadingTarget:this.$refs.table}).then(function(a){a.data.status&&e.$invokeSubMethod("setData","table",a.data)}).catch(function(e){})},showAddDialog:function(){this.addSourceVisible=!0,this.isAdd=!0},edit:function(e){this.addSourceVisible=!0,this.isAdd=!1,this.addForm=JSON.parse(o()(e)),this.valiOnly.uri=e.uri,this.valiOnly.method=e.method},closeDialog:function(e){this.$nextTick(function(){this.$refs[e].resetFields(),this.addForm=JSON.parse(o()(s)),this.flag.changeUrl=!1,this.flag.isOpen=!1})},saveDialog:function(e){var a=this,t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.isAdd?a.$ajax.post("rest/module/baseResource",t.addForm).then(function(e){e.data.status?(t.$message.success(e.data.answerMsg),t.addSourceVisible=!1,a.requestResource()):a.$message.error(e.data.answerMsg)}):a.$ajax.put("rest/module/baseResource",t.addForm).then(function(e){e.data.status?(t.$message.success(e.data.answerMsg),t.addSourceVisible=!1,t.requestResource()):a.$message.error(e.data.answerMsg)}).catch(function(e){})})},keydown:function(e){32==e.keyCode&&(event.returnValue=!1)},urlChange:function(e,a){"uri"==a&&(this.addForm.uri=e.replace(/\s+/g,"")),e==this.valiOnly[a]?this.flag.changeUrl=!1:this.flag.changeUrl=!0},openDialog:function(){this.$nextTick(function(){this.flag.isOpen=!0,this.flag.changeUrl=!1})},changeRadio:function(e){this.flag.changeUrl=!0}},computed:{title:function(){return this.isAdd?"新增资源":"编辑资源"}},mounted:function(){this.requestResource()}}}});
//# sourceMappingURL=32.7a96554aee9929f0c814.js.map