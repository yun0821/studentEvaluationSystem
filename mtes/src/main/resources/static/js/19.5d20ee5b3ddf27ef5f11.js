webpackJsonp([19],{"1evV":function(a,e,t){e=a.exports=t("acE3")(!0),e.push([a.i,".ad-wrap-horizontal.ad-border .ad-item[data-v-03575cb0]{border:1px solid #a8c8f9}.ad-wrap-horizontal[data-v-03575cb0]{margin:-5px}.ad-wrap-horizontal .inblock[data-v-03575cb0]{padding:5px}.ad-wrap-horizontal .ad-item[data-v-03575cb0]{float:left;width:100%}.ad-wrap-horizontal .ad-item-label[data-v-03575cb0],.ad-wrap-horizontal .ad-item-value[data-v-03575cb0]{font-size:16px;padding:8px 0;min-width:120px;color:#fff;display:block;text-align:center}.ad-wrap-horizontal .ad-item-value[data-v-03575cb0]{color:#444}.ad-wrap-vertical .inblock[data-v-03575cb0]{display:block}.ad-wrap-vertical.ad-border[data-v-03575cb0]{border-right:1px solid #78adfe;border-bottom:1px solid #78adfe}.ad-wrap-vertical.ad-border .ad-item[data-v-03575cb0]{border-left:1px solid #78adfe;border-top:1px solid #78adfe}.ad-wrap-vertical .ad-item[data-v-03575cb0]{display:flex;padding:8px 5px}.ad-wrap-vertical .ad-item-label[data-v-03575cb0]{width:50%;padding:3px 0;text-align:center}.ad-wrap-vertical .ad-item-value[data-v-03575cb0]{flex:1;padding:3px 10px;width:50%;color:#fff;text-align:center}","",{version:3,sources:["C:/vscode/ysems_webapp/src/views/platform/template/alarmData.vue"],names:[],mappings:"AA8DA,wDACE,wBAA0B,CAC3B,AACD,qCACE,WAAa,CACd,AACD,8CACE,WAAa,CACd,AACD,8CACE,WAAY,AACZ,UAAY,CACb,AACD,wGAEE,eAAgB,AAChB,cAAe,AACf,gBAAiB,AACjB,WAAY,AACZ,cAAe,AACf,iBAAmB,CACpB,AACD,oDACE,UAAY,CACb,AAED,4CACE,aAAe,CAChB,AACD,6CACE,+BAAgC,AAChC,+BAAiC,CAClC,AACD,sDACE,8BAA+B,AAC/B,4BAA8B,CAC/B,AACD,4CACE,aAAc,AACd,eAAiB,CAClB,AACD,kDACE,UAAW,AACX,cAAe,AACf,iBAAmB,CACpB,AACD,kDACE,OAAQ,AACR,iBAAkB,AAClB,UAAW,AACX,WAAY,AACZ,iBAAmB,CACpB",file:"alarmData.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/*horizontal*/\n.ad-wrap-horizontal.ad-border .ad-item[data-v-03575cb0] {\r\n  border: 1px solid #a8c8f9;\n}\n.ad-wrap-horizontal[data-v-03575cb0] {\r\n  margin: -5px;\n}\n.ad-wrap-horizontal .inblock[data-v-03575cb0] {\r\n  padding: 5px;\n}\n.ad-wrap-horizontal .ad-item[data-v-03575cb0] {\r\n  float: left;\r\n  width: 100%;\n}\n.ad-wrap-horizontal .ad-item-label[data-v-03575cb0],\r\n.ad-wrap-horizontal .ad-item-value[data-v-03575cb0] {\r\n  font-size: 16px;\r\n  padding: 8px 0;\r\n  min-width: 120px;\r\n  color: #fff;\r\n  display: block;\r\n  text-align: center;\n}\n.ad-wrap-horizontal .ad-item-value[data-v-03575cb0] {\r\n  color: #444;\n}\r\n/*vertical*/\n.ad-wrap-vertical .inblock[data-v-03575cb0] {\r\n  display: block;\n}\n.ad-wrap-vertical.ad-border[data-v-03575cb0] {\r\n  border-right: 1px solid #78adfe;\r\n  border-bottom: 1px solid #78adfe;\n}\n.ad-wrap-vertical.ad-border .ad-item[data-v-03575cb0] {\r\n  border-left: 1px solid #78adfe;\r\n  border-top: 1px solid #78adfe;\n}\n.ad-wrap-vertical .ad-item[data-v-03575cb0] {\r\n  display: flex;\r\n  padding: 8px 5px;\n}\n.ad-wrap-vertical .ad-item-label[data-v-03575cb0] {\r\n  width: 50%;\r\n  padding: 3px 0;\r\n  text-align: center;\n}\n.ad-wrap-vertical .ad-item-value[data-v-03575cb0] {\r\n  flex: 1;\r\n  padding: 3px 10px;\r\n  width: 50%;\r\n  color: #fff;\r\n  text-align: center;\n}\r\n"],sourceRoot:""}])},"39Hv":function(a,e,t){"use strict";var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("da-equal-panel",{attrs:{"left-width":"160px","right-width":"200px",height:"auto"}},[t("da-panel",{staticClass:"text-center",attrs:{slot:"left",padding:"r","no-head":!0},slot:"left"},[t("div",{staticClass:"alarm "},[t("h3",[a._v("告警数")]),a._v(" "),t("P",{staticClass:"alarm-total"},[a._v(a._s(a.alarmCount))])],1)]),a._v(" "),t("alarm-data",{attrs:{slot:"right",dataLists:a.alarmLevelList,label:"name","value-key":"value",mode:"vertical"},slot:"right"}),a._v(" "),t("div",{staticClass:"panel-flex-1 clearfix"},[t("da-panel",{attrs:{padding:"lb","padding-content":"lrtb","no-head":!0}},[t("div",{staticClass:"inblock pad-r-10"},[t("el-button",{staticClass:"link-a",attrs:{type:"text"},on:{click:a.redirectHistory}},[a._v("历史告警查询")]),a._v(" "),t("el-button",{staticClass:"link-a",attrs:{type:"text"},on:{click:a.redirectStatistics}},[a._v("告警统计和分析")]),a._v(" "),t("el-button",{staticClass:"link-a",attrs:{type:"text"},on:{click:a.redirectConfigruction}},[a._v("关注告警配置")])],1),a._v(" "),t("div",{staticClass:"inblock"},[t("label",[a._v("刷新倒计时："+a._s(a.refreshTime)+"秒")]),a._v(" "),t("label",[a._v("刷新频率")]),a._v(" "),t("da-radio-select",{attrs:{maxNum:1,"option-lists":a.refreshRateList,label:"name","value-key":"id"},on:{change:a.changeRefreshRate},model:{value:a.refreshRate,callback:function(e){a.refreshRate=e},expression:"refreshRate"}}),a._v(" "),t("el-checkbox",{on:{change:a.changeCheck},model:{value:a.refreshChecked,callback:function(e){a.refreshChecked=e},expression:"refreshChecked"}},[a._v(a._s(a.dspRefresh))]),a._v(" "),t("da-radio-select",{attrs:{maxNum:3,"option-lists":a.attentionAlarmList,label:"name","value-key":"id"},on:{change:a.changeAttentionAlarm},model:{value:a.attentionAlarm,callback:function(e){a.attentionAlarm=e},expression:"attentionAlarm"}})],1)]),a._v(" "),t("da-panel",{attrs:{padding:"lb",border:!1,"no-head":!0}},[t("alarm-data",{attrs:{dataLists:a.exceptionCountList,width:"20%",label:"name","value-key":"value",mode:"horizontal"}})],1)],1)],1),a._v(" "),t("da-panel",{ref:"panelAlarmDetail",attrs:{title:"告警信息详细清单",width:"100%",height:"auto",border:!1,"min-height":"200px",padding:"t"}},[t("div",{attrs:{slot:"search"},slot:"search"},[t("label",[a._v("告警级别：")]),a._v(" "),t("da-radio-select",{attrs:{maxNum:1,"option-lists":a.alarmLevelNum,label:"name","value-key":"id"},on:{change:a.changealArmLevel},model:{value:a.alarmLevel,callback:function(e){a.alarmLevel=e},expression:"alarmLevel"}}),a._v(" "),t("label",[a._v("告警类型：")]),a._v(" "),t("da-radio-select",{attrs:{maxNum:1,"option-lists":a.alarmCategoryList,label:"name","value-key":"id"},on:{change:a.changeAlarmCategory},model:{value:a.alarmCategory,callback:function(e){a.alarmCategory=e},expression:"alarmCategory"}}),a._v(" "),t("span",[a._v("说明：三类及四类告警无需确认")])],1),a._v(" "),t("da-table",{staticClass:"analysis-table",attrs:{colums:a.alarmDetailcolumnData,"front-page":!0,"table-list":a.alarmDetailtable}},[t("el-table-column",{attrs:{slot:"operation",property:"operation",label:"操作",width:"150",align:"center",fixed:"right"},slot:"operation",scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){a.detail(e.row)}}},[a._v("详情")])]}}])})],1)],1),a._v(" "),t("da-dialog",{attrs:{title:"告警详情",visible:a.dialogVisible},on:{"update:visible":function(e){a.dialogVisible=e},close:function(e){a.closeDialog()}}},[t("el-form",{ref:"diaAlarmDetail",attrs:{"label-width":"120px",model:a.diaAlarmDetail}},[t("el-form-item",{attrs:{label:"告警类型",prop:"alarmGroupName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:a.diaAlarmDetail.alarmGroupName,callback:function(e){a.$set(a.diaAlarmDetail,"alarmGroupName",e)},expression:"diaAlarmDetail.alarmGroupName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"告警详情",prop:"alarmDetail"}},[t("el-input",{attrs:{"auto-complete":"off",type:"textarea"},model:{value:a.diaAlarmDetail.alarmDetail,callback:function(e){a.$set(a.diaAlarmDetail,"alarmDetail",e)},expression:"diaAlarmDetail.alarmDetail"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"所属部门",prop:"orgId"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:a.diaAlarmDetail.orgId,callback:function(e){a.$set(a.diaAlarmDetail,"orgId",e)},expression:"diaAlarmDetail.orgId"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"计量名称",prop:"meterName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:a.diaAlarmDetail.meterName,callback:function(e){a.$set(a.diaAlarmDetail,"meterName",e)},expression:"diaAlarmDetail.meterName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"数据项名称",prop:"value"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:a.diaAlarmDetail.value,callback:function(e){a.$set(a.diaAlarmDetail,"value",e)},expression:"diaAlarmDetail.value"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"告警时间",prop:"alarmTime"}},[t("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd"},model:{value:a.diaAlarmDetail.alarmTime,callback:function(e){a.$set(a.diaAlarmDetail,"alarmTime",e)},expression:"diaAlarmDetail.alarmTime"}})],1)],1),a._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){a.saveDialog()}}},[a._v("确认告警")]),a._v(" "),t("el-button",{on:{click:function(e){a.dialogVisible=!1}}},[a._v("取 消")])],1)],1)],1)},r=[],i={render:l,staticRenderFns:r};e.a=i},"3NXW":function(a,e,t){var l=t("MPS5");"string"==typeof l&&(l=[[a.i,l,""]]),l.locals&&(a.exports=l.locals);t("FIqI")("78e608cd",l,!0,{})},D7xR:function(a,e,t){"use strict";var l=t("3cXf"),r=t.n(l),i=t("f0Re");t("yt7g");e.a={components:{alarmData:i.a},data:function(){return{allAlarmData:[],alarmCount:0,alarmLevelList:[{value:0,name:"一类告警",id:0},{value:0,name:"二类告警",id:1},{value:0,name:"三类告警",id:2},{value:0,name:"四类告警",id:3}],refreshTime:1,refreshRate:"",refreshRateList:[{id:10,name:"10秒"},{id:30,name:"30秒"},{id:60,name:"60秒"}],refreshChecked:!1,dspRefresh:"关",exceptionCountList:[],attentionAlarm:"",selectAlarmCode:"",selectAttentionAlarm:"",attentionAlarmList:[{id:0,name:"所有的告警"},{id:1,name:"我关注的告警"}],alarmLevel:"",selectAlarmLevel:null,alarmLevelNum:[{name:"全部",id:0},{name:"一类",id:1},{name:"二类",id:2},{name:"三类",id:3},{name:"四类",id:4}],alarmCategory:"",selectAlarmCategory:"",alarmCategoryList:[],alarmDetailcolumnData:[{label:"告警类型",prop:"alarmGroupName"},{label:"告警详情",prop:"alarmDetail",subStr:!0,popover:!0},{label:"所属部门",prop:"orgId",displace:{}},{label:"计量点名称",prop:"meterName"},{label:"数据项名称",prop:"value"},{label:"告警时间",prop:"alarmTime",format:"YYYY-MM-DD"}],alarmDetailtable:[],dialogVisible:!1,diaAlarmDetail:{alarmGroupName:"",alarmDetail:"",orgId:"",meterName:"",value:"",alarmTime:"",isConfirm:""}}},methods:{inintData:function(){this.getAttentionAlarm(),this.getDepartmentList()},loadData:function(){this.getAlarmLevelCount(),this.getAlarmDetailtable(),this.getExceptionCountList()},getExceptionCountList:function(){var a=this;this.$ajax.get("rest/analysisData/alarmGroup",{params:{title:"查询告警种类"}}).then(function(e){if(e.data.status){var t=[];a.$each(e.data.records,function(a){t.push({name:a.name,idValue:a.id,value:0})}),a.exceptionCountList=t,t=[{name:"全部",idValue:"",value:0}].concat(t),a.$each(t,function(e,t){a.alarmCategoryList.push({name:e.name,idValue:e.idValue,id:t})}),a.selectAlarmCategory=a.alarmCategoryList[0].idValue,a.getAlarmCategoryCount()}})},getAttentionAlarm:function(){var a=this;this.$ajax.get("rest/analysisData/alarmItem",{params:{title:"关注的告警",userIds:null,alarmGroups:null,receiveTypes:1,isAlarmGroup:null,isReceiveType:!0}}).then(function(e){if(e.data.status)for(var t=0;t<e.data.records.length;t++)t<e.data.records.length-1?a.selectAlarmCode+=e.data.records[t].id+",":a.selectAlarmCode+=e.data.records[t].id})},redirectHistory:function(){this.$router.push({path:"/alarmHistorySearch"})},redirectStatistics:function(){this.$router.push({path:"/alarmStatisticsAnalysis"})},redirectConfigruction:function(){console.log(22),this.$router.push({path:"/alarmConfiguration"})},changeRefreshRate:function(){this.refreshTime=parseInt(this.refreshRate)},changeCheck:function(){this.refreshChecked?this.dspRefresh="开":this.dspRefresh="关"},getAlarmLevelCount:function(){var a=this,e=new Date(2e3,0,1);e=this.$moment(e,"YYYY-MM-DD");var t=this.$moment(new Date,"YYYY-MM-DD");this.$ajax.get("rest/analysisData/alarmData",{params:{title:"告警级别统计",userIds:null,alarmLevels:null,alarmGroups:null,alarmCodes:this.selectAttentionAlarm,isConfirm:!1,receiveTypes:null,orgIds:null,equipIds:null,productIds:null,alarmItems:null,startTime:e,endTime:t,isCount:!0,countCycle:"0",groupBys:"010000000"}}).then(function(e){if(e.data.status){var t=e.data.records;if(null!==t){a.alarmCount=0;for(var l=0;l<t.length;l++)a.alarmCount+=t[l].alarmNum;for(var r=0;r<t.length;r++)for(var i=0;i<a.alarmLevelList.length;i++)t[r].level==a.alarmLevelList[i].id+1&&(a.alarmLevelList[i].value=t[r].alarmNum)}}})},getAlarmCategoryCount:function(){var a=this,e=new Date(2e3,0,1);e=this.$moment(e,"YYYY-MM-DD");var t=this.$moment(new Date,"YYYY-MM-DD");this.$ajax.get("rest/analysisData/alarmData",{params:{title:"告警类型统计",userIds:null,alarmLevels:null,alarmGroups:this.selectAlarmCategory,alarmCodes:this.selectAttentionAlarm,isConfirm:!1,receiveTypes:null,orgIds:null,equipIds:null,productIds:null,alarmItems:null,startTime:e,endTime:t,isCount:!0,countCycle:"0",groupBys:"001000000"}}).then(function(e){if(e.data.status){var t=e.data.records;if(null!==t)for(var l=0;l<a.exceptionCountList.length;l++)for(var r=0;r<t.length;r++)a.exceptionCountList[l].name==t[r].alarmGroupName&&(a.exceptionCountList[l].value=t[r].alarmNum)}})},changeAttentionAlarm:function(){0==this.attentionAlarm?this.selectAttentionAlarm="":this.selectAttentionAlarm=this.selectAlarmCode,this.loadData()},changealArmLevel:function(){switch(this.alarmLevel){case 0:this.selectAlarmLevel="";break;case 1:this.selectAlarmLevel="1";break;case 2:this.selectAlarmLevel="2";break;case 3:this.selectAlarmLevel="3";break;case 4:this.selectAlarmLevel="4"}this.getAlarmDetailtable()},changeAlarmCategory:function(){for(var a=0;a<this.alarmCategoryList.length;a++)if(this.alarmCategory==this.alarmCategoryList[a].id){this.selectAlarmCategory=this.alarmCategoryList[a].idValue;break}this.getAlarmDetailtable()},getDepartmentList:function(){var a=this;this.$ajax.get("rest/analysisData/depart",{params:{title:"查询部门列表",orgTypes:null,parentIds:null}}).then(function(e){if(e.data.status){var t=[];a.$each(e.data.records,function(a){t.push({name:a.name,orgId:a.id})});var l={};t.forEach(function(a){l[a.orgId]=a.name}),a.alarmDetailcolumnData[2].displace=l}})},getAlarmDetailtable:function(){var a=this,e=new Date(2e3,0,1);e=this.$moment(e,"YYYY-MM-DD");var t=this.$moment(new Date,"YYYY-MM-DD");this.$ajax.get("rest/analysisData/alarmData",{params:{title:"告警详细信息",userIds:null,alarmLevels:this.selectAlarmLevel,alarmGroups:this.selectAlarmCategory,alarmCodes:this.selectAttentionAlarm,isConfirm:!1,receiveTypes:null,orgIds:null,equipIds:null,productIds:null,alarmItems:null,startTime:e,endTime:t,isCount:!1,countCycle:"0",groupBys:"101001100"}}).then(function(e){e.data.status&&(a.alarmDetailtable=e.data.records)})},detail:function(a){this.dialogVisible=!0,this.diaAlarmDetail=JSON.parse(r()(a))},closeDialog:function(){this.$nextTick(function(){this.diaAlarmDetail={alarmGroupName:"",alarmDetail:"",orgId:"",meterName:"",value:"",alarmTime:"",isConfirm:""}})},saveDialog:function(){var a=this,e={id:""};e.id=this.diaAlarmDetail.id,this.$ajax.post("rest/alarm/confirm",e).then(function(e){e.data.status?(a.$message.success(e.data.answerMsg),a.dialogVisible=!1):a.$message.error(e.data.answerMsg),a.loadData()})}},mounted:function(){var a=this;this.inintData(),this.loadData(),setInterval(function(){a.refreshTime>0?a.refreshTime--:(a.refreshTime=parseInt(a.refreshRate),1==a.refreshChecked&&a.loadData())},1e3)}}},EjCp:function(a,e,t){var l=t("1evV");"string"==typeof l&&(l=[[a.i,l,""]]),l.locals&&(a.exports=l.locals);t("FIqI")("09ca1138",l,!0,{})},J59p:function(a,e,t){"use strict";var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{class:{"ad-wrap-vertical":"vertical"===a.mode,"ad-wrap-horizontal clearfix":"vertical"!==a.mode,"ad-border":"border"},style:"vertical"===a.mode?"width:"+a.width:""},a._l(a.dataLists,function(e,l){return t("div",{key:l,staticClass:"inblock",style:"vertical"===a.mode?"":"width:"+a.width},[t("div",{staticClass:"ad-item"},[t("span",{staticClass:"ad-item-label",style:"vertical"===a.mode?"":"background-color:"+a.color[l%a.color.length]},[a._v(a._s(e[a.label]))]),a._v(" "),t("span",{staticClass:"ad-item-value",style:"vertical"===a.mode?"background-color:"+a.color[l%a.color.length]:""},[a._v(a._s(e[a.valueKey]))])])])}))},r=[],i={render:l,staticRenderFns:r};e.a=i},Lybm:function(a,e,t){"use strict";function l(a){t("3NXW")}Object.defineProperty(e,"__esModule",{value:!0});var r=t("D7xR"),i=t("39Hv"),n=t("J0+h"),o=l,s=n(r.a,i.a,o,null,null);e.default=s.exports},MPS5:function(a,e,t){e=a.exports=t("acE3")(!0),e.push([a.i,".alarm{padding:40px 0;line-height:43px;font-size:25px}.alarm-total{color:red;font-weight:700}","",{version:3,sources:["C:/vscode/ysems_webapp/src/views/platform/running/alarmCentre.vue"],names:[],mappings:"AACA,OACE,eAAgB,AAChB,iBAAkB,AAClB,cAAgB,CACjB,AACD,aACE,UAAW,AACX,eAAkB,CACnB",file:"alarmCentre.vue",sourcesContent:["\n.alarm {\r\n  padding: 40px 0;\r\n  line-height: 43px;\r\n  font-size: 25px;\n}\n.alarm-total {\r\n  color: red;\r\n  font-weight: bold;\n}\r\n"],sourceRoot:""}])},f0Re:function(a,e,t){"use strict";function l(a){t("EjCp")}var r=t("gQEH"),i=t("J59p"),n=t("J0+h"),o=l,s=n(r.a,i.a,o,"data-v-03575cb0",null);e.a=s.exports},gQEH:function(a,e,t){"use strict";e.a={props:{dataLists:{type:Array},mode:{type:String,default:"vertical"},label:{type:String,default:"name"},valueKey:{type:String,default:"id"},width:{type:String,default:"200px"},border:{type:Boolean,default:!0}},data:function(){return{color:["#0C7E0E","#426896","#AF399C","#DC4D5B","#4617B4","#3B65BF","#177D86","#2D004E","#00D8CC","#004060","#4E0038","#33CC00","#E36B19"]}}}}});
//# sourceMappingURL=19.5d20ee5b3ddf27ef5f11.js.map