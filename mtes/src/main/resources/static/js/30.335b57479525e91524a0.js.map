{"version":3,"sources":["webpack:///static/js/30.335b57479525e91524a0.js","webpack:///./src/views/platform/energy/tabulationEquipmentLedger.vue?d684","webpack:///./src/views/platform/energy/tabulationEquipmentLedger.vue?8d65","webpack:///./src/views/platform/energy/tabulationEquipmentLedger.vue?b187","webpack:///src/views/platform/energy/tabulationEquipmentLedger.vue","webpack:///./src/views/platform/energy/tabulationEquipmentLedger.vue"],"names":["webpackJsonp","0pir","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourceRoot","4cyI","content","locals","M08u","__webpack_exports__","render","_vm","this","_h","$createElement","_c","_self","attrs","slot","inline","label","model","value","meterForm","callback","$$v","$set","expression","_v","type","on","click","search","exportTable","ref","staticClass","colums","meterColumnData","front-page","table-list","meterData","title","width","height","border","min-height","padding","show-index","meterCountColumnData","show-summary","meterCountData","productCountColumnData","productCountData","staticRenderFns","esExports","NEKO","data","manageNo","name","address","prop","displace","format","methods","loadData","getMeterTable","_this","$ajax","get","params","levels","orgIds","equipIds","instrumentIds","entEnergyIds","isAutoCollect","isStopUse","purposes","isInvented","energyIds","isAll","isCount","groupBys","then","res","status","records","getMeterCountData","_this2","tempData","tempIndex","$each","item","energyId","index","indexOf","num","meterType","meterCount","level_1","level_2","level_3","length","grade","getProductCountData","_this3","manufacturer","arryData","manufacturerId","concat","tempArry","$refs","meterTb","filterData","export","getMrterType","_this4","equipGroups","obj","key","id","mounted","uJmW","injectStyle","ssrContext","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_tabulationEquipmentLedger_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_766e4971_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_tabulationEquipmentLedger_vue__","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/30.335b57479525e91524a0.js","sourcesContent":["webpackJsonp([30],{\n\n/***/ \"0pir\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"acE3\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"tabulationEquipmentLedger.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"4cyI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"0pir\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"FIqI\")(\"e7e0ed78\", content, true, {});\n\n/***/ }),\n\n/***/ \"M08u\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', [_c('el-form', {\n    attrs: {\n      \"slot\": \"search\",\n      \"inline\": true\n    },\n    slot: \"search\"\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"表计编号\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.manageNo),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"manageNo\", $$v)\n      },\n      expression: \"meterForm.manageNo\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"表计名称\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.name),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"name\", $$v)\n      },\n      expression: \"meterForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"安装使用地点\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.address),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"address\", $$v)\n      },\n      expression: \"meterForm.address\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.search\n    }\n  }, [_vm._v(\"查询\")])], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.exportTable\n    }\n  }, [_vm._v(\"导出\")])], 1)], 1), _vm._v(\" \"), _c('da-table', {\n    ref: \"meterTb\",\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"colums\": _vm.meterColumnData,\n      \"front-page\": true,\n      \"table-list\": _vm.meterData\n    }\n  })], 1), _vm._v(\" \"), _c('da-panel', {\n    attrs: {\n      \"title\": \"表计各级数量统计\",\n      \"width\": \"100%\",\n      \"height\": \"auto\",\n      \"border\": false,\n      \"min-height\": \"200px\",\n      \"padding\": \"t\"\n    }\n  }, [_c('da-table', {\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"show-index\": false,\n      \"colums\": _vm.meterCountColumnData,\n      \"show-summary\": true,\n      \"table-list\": _vm.meterCountData\n    }\n  })], 1), _vm._v(\" \"), _c('da-panel', {\n    attrs: {\n      \"title\": \"生产厂家统计\",\n      \"width\": \"100%\",\n      \"height\": \"auto\",\n      \"border\": false,\n      \"min-height\": \"200px\",\n      \"padding\": \"t\"\n    }\n  }, [_c('da-table', {\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"show-index\": false,\n      \"colums\": _vm.productCountColumnData,\n      \"show-summary\": true,\n      \"table-list\": _vm.productCountData\n    }\n  })], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"NEKO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      meterForm: {\n        manageNo: \"\",\n        name: \"\",\n        address: \"\"\n      },\n      meterColumnData: [{\n        label: \"管理编号\",\n        prop: \"manageNo\"\n      }, {\n        label: \"表计名称\",\n        prop: \"name\"\n      }, {\n        label: \"型号\",\n        prop: \"model\",\n        displace: {}\n      }, {\n        label: \"准确度等级\",\n        prop: \"accuracyLevel\"\n      }, {\n        label: \"生产厂家\",\n        prop: \"manufacturer\"\n      }, {\n        label: \"出厂编号\",\n        prop: \"manufacturerNo\",\n        width: \"110px\"\n      }, {\n        label: \"安装使用地点\",\n        prop: \"address\",\n        width: \"130px\"\n      }, {\n        label: \"安装日期\",\n        prop: \"installDate\",\n        format: \"YYYY-MM-DD\"\n      }, {\n        label: \"校验/校准日期\",\n        prop: \"checkDate\",\n        format: \"YYYY-MM-DD\"\n      }, {\n        label: \"检定证书编号\",\n        prop: \"checkNo\"\n      }],\n      meterData: [],\n      meterCountColumnData: [{\n        label: \"表计类型\",\n        prop: \"meterType\",\n        displace: {}\n      }, {\n        label: \"合计\",\n        prop: \"meterCount\"\n      }, {\n        label: \"一级\",\n        prop: \"level_1\"\n      }, {\n        label: \"二级\",\n        prop: \"level_2\"\n      }, {\n        label: \"三级\",\n        prop: \"level_3\"\n      }],\n      meterCountData: [],\n      productCountColumnData: [{\n        label: \"表计类型\",\n        prop: \"energyId\",\n        displace: {}\n      }],\n      productCountData: []\n    };\n  },\n\n  methods: {\n    loadData: function loadData() {},\n\n    //获得表计详情\n    getMeterTable: function getMeterTable() {\n      var _this = this;\n\n      this.$ajax.get(\"rest/analysisData/meter\", {\n        params: {\n          title: \"表计查询\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\n          levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\n          isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\n          type: null, // - 计量种类，1能源,2非能源,为空表示全查\n          purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\n          isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\n          energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAll: true, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\n          isCount: false, // - 是否统计，可为空，为空表示不统计\n          groupBys: 1000000000 // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\n        }\n      }).then(function (res) {\n        if (res.data.status) {\n          _this.meterData = res.data.records;\n        }\n      });\n    },\n\n    //获得表计各级数量统计\n    getMeterCountData: function getMeterCountData() {\n      var _this2 = this;\n\n      this.$ajax.get(\"rest/analysisData/meter\", {\n        params: {\n          title: \"表计各级数量统计\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\n          levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\n          isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\n          type: null, // - 计量种类，1能源,2非能源,为空表示全查\n          purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\n          isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\n          energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAll: false, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\n          isCount: true, // - 是否统计，可为空，为空表示不统计\n          groupBys: \"0100100000\" // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\n        }\n      }).then(function (res) {\n        if (res.data.status) {\n          var tempData = [];\n          var tempIndex = [];\n          _this2.$each(res.data.records, function (item) {\n            if (item.energyId) {\n              var index = tempIndex.indexOf(item.energyId);\n              var value = item.num;\n              if (index === -1) {\n                tempIndex.push(item.energyId);\n                tempData.push({\n                  meterType: item.energyId,\n                  meterCount: 0,\n                  level_1: 0,\n                  level_2: 0,\n                  level_3: 0\n                });\n                index = tempIndex.length - 1;\n              }\n              tempData[index][\"level_\" + item.grade] += value;\n              tempData[index][\"meterCount\"] += value;\n            }\n          });\n          _this2.meterCountData = tempData;\n        }\n      });\n    },\n\n    //获得生产厂家统计\n    getProductCountData: function getProductCountData() {\n      var _this3 = this;\n\n      this.$ajax.get(\"rest/analysisData/meter\", {\n        params: {\n          title: \"生产厂家统计\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\n          levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\n          isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\n          type: null, // - 计量种类，1能源,2非能源,为空表示全查\n          purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\n          isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\n          energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\n          isAll: false, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\n          isCount: true, // - 是否统计，可为空，为空表示不统计\n          groupBys: \"0000100001\" // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\n        }\n      }).then(function (res) {\n        if (res.data.status) {\n          var testData = [];\n          // testData.push({\n          //   name: \"LED实验室\",\n          //   manufacturerId: 7,\n          //   id: 18,\n          //   energyId: 23,\n          //   manufacturer: \"安科瑞\",\n          //   num: 62\n          // });\n          // testData.push({\n          //   name: \"LED实验室\",\n          //   manufacturerId: 8,\n          //   id: 28,\n          //   energyId: 35,\n          //   manufacturer: \"科陆\",\n          //   num: 58\n          // });\n          var manufacturer = [];\n          var arryData = [];\n          _this3.$each(res.data.records, function (item) {\n            if (item.manufacturerId) {\n              var index = arryData.indexOf(item.manufacturerId);\n              if (index === -1) {\n                arryData.push({\n                  label: item.manufacturer,\n                  prop: \"id_\" + item.manufacturerId\n                });\n              }\n            }\n          });\n          manufacturer = manufacturer.concat(arryData);\n          _this3.productCountColumnData = _this3.productCountColumnData.concat(manufacturer);\n          var tempData = [];\n          var tempIndex = [];\n          _this3.$each(res.data.records, function (item) {\n            if (item.energyId) {\n              var index = tempIndex.indexOf(item.energyId);\n              if (index === -1) {\n                tempIndex.push(item.energyId);\n                var tempArry = {};\n                for (var i = 0; i < _this3.productCountColumnData.length; i++) {\n                  var key = _this3.productCountColumnData[i].prop;\n                  var value = \"\";\n                  tempArry[key] = value;\n                }\n                tempData.push(tempArry);\n                index = tempIndex.length - 1;\n                tempData[index][\"id_\" + item.manufacturerId] = item.num;\n                tempData[index][\"energyId\"] = item.energyId;\n              }\n            }\n          });\n          _this3.productCountData = tempData;\n        }\n      });\n    },\n    search: function search() {\n      this.$refs.meterTb.filterData(this.meterForm);\n    },\n    exportTable: function exportTable() {\n      this.$refs.meterTb.export(\"表计配备与台账\");\n    },\n    getMrterType: function getMrterType() {\n      var _this4 = this;\n\n      this.$ajax.get(\"rest/analysisData/energy\", {\n        params: {\n          title: null, //- 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\n          orgIds: null, //- 部门ID，多个用逗号隔开，可为空，为空不作为查询条件\n          equipGroups: null, //- 设备分组ID，多个用逗号隔开，可为空，为空不作为查询条件\n          equipIds: null //- 设备ID，多个用逗号隔开，可为空，为空不作为查询条件\n        }\n      }).then(function (res) {\n        if (res.data.status) {\n          var obj = {};\n          for (var i = 0; i < res.data.records.length; i++) {\n            var key = res.data.records[i].id;\n            var value = res.data.records[i].name;\n            obj[key] = value;\n          }\n          _this4.meterCountColumnData[0].displace = _this4.productCountColumnData[0].displace = obj;\n          _this4.getProductCountData();\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getMrterType();\n    this.getMeterTable();\n    this.getMeterCountData();\n    // this.getProductCountData();\n  }\n});\n\n/***/ }),\n\n/***/ \"uJmW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_tabulationEquipmentLedger_vue__ = __webpack_require__(\"NEKO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_766e4971_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_tabulationEquipmentLedger_vue__ = __webpack_require__(\"M08u\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"4cyI\")\n}\nvar normalizeComponent = __webpack_require__(\"J0+h\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-766e4971\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_script_index_0_tabulationEquipmentLedger_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_0_4_vue_loader_lib_template_compiler_index_id_data_v_766e4971_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_13_0_4_vue_loader_lib_selector_type_template_index_0_tabulationEquipmentLedger_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/30.335b57479525e91524a0.js","exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.0@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"tabulationEquipmentLedger.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.0@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@13.0.4@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-766e4971\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/platform/energy/tabulationEquipmentLedger.vue\n// module id = 0pir\n// module chunks = 30","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.0@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-766e4971\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./tabulationEquipmentLedger.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"e7e0ed78\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.0.0@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.0@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@13.0.4@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-766e4971\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=styles&index=0!./src/views/platform/energy/tabulationEquipmentLedger.vue\n// module id = 4cyI\n// module chunks = 30","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', [_c('el-form', {\n    attrs: {\n      \"slot\": \"search\",\n      \"inline\": true\n    },\n    slot: \"search\"\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"表计编号\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.manageNo),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"manageNo\", $$v)\n      },\n      expression: \"meterForm.manageNo\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"表计名称\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.name),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"name\", $$v)\n      },\n      expression: \"meterForm.name\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"安装使用地点\"\n    }\n  }, [_c('el-input', {\n    model: {\n      value: (_vm.meterForm.address),\n      callback: function($$v) {\n        _vm.$set(_vm.meterForm, \"address\", $$v)\n      },\n      expression: \"meterForm.address\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.search\n    }\n  }, [_vm._v(\"查询\")])], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.exportTable\n    }\n  }, [_vm._v(\"导出\")])], 1)], 1), _vm._v(\" \"), _c('da-table', {\n    ref: \"meterTb\",\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"colums\": _vm.meterColumnData,\n      \"front-page\": true,\n      \"table-list\": _vm.meterData\n    }\n  })], 1), _vm._v(\" \"), _c('da-panel', {\n    attrs: {\n      \"title\": \"表计各级数量统计\",\n      \"width\": \"100%\",\n      \"height\": \"auto\",\n      \"border\": false,\n      \"min-height\": \"200px\",\n      \"padding\": \"t\"\n    }\n  }, [_c('da-table', {\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"show-index\": false,\n      \"colums\": _vm.meterCountColumnData,\n      \"show-summary\": true,\n      \"table-list\": _vm.meterCountData\n    }\n  })], 1), _vm._v(\" \"), _c('da-panel', {\n    attrs: {\n      \"title\": \"生产厂家统计\",\n      \"width\": \"100%\",\n      \"height\": \"auto\",\n      \"border\": false,\n      \"min-height\": \"200px\",\n      \"padding\": \"t\"\n    }\n  }, [_c('da-table', {\n    staticClass: \"analysis-table\",\n    attrs: {\n      \"show-index\": false,\n      \"colums\": _vm.productCountColumnData,\n      \"show-summary\": true,\n      \"table-list\": _vm.productCountData\n    }\n  })], 1)], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@13.0.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-766e4971\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_vue-loader@13.0.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/platform/energy/tabulationEquipmentLedger.vue\n// module id = M08u\n// module chunks = 30","<template>\r\n  <div>\r\n    <div>\r\n      <el-form slot=\"search\" :inline=\"true\">\r\n        <el-form-item label=\"表计编号\">\r\n          <el-input v-model=\"meterForm.manageNo\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"表计名称\">\r\n          <el-input v-model=\"meterForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"安装使用地点\">\r\n          <el-input v-model=\"meterForm.address\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"search\">查询</el-button>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"exportTable\">导出</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <da-table class=\"analysis-table\" ref=\"meterTb\" :colums=\"meterColumnData\" :front-page=\"true\" :table-list=\"meterData\"></da-table>\r\n    </div>\r\n    <da-panel title=\"表计各级数量统计\" width=\"100%\" height=\"auto\" :border=\"false\" min-height=\"200px\" padding=\"t\">\r\n      <da-table class=\"analysis-table\" :show-index=\"false\" :colums=\"meterCountColumnData\" :show-summary=\"true\" :table-list=\"meterCountData\">\r\n      </da-table>\r\n    </da-panel>\r\n    <da-panel title=\"生产厂家统计\" width=\"100%\" height=\"auto\" :border=\"false\" min-height=\"200px\" padding=\"t\">\r\n      <da-table class=\"analysis-table\" :show-index=\"false\" :colums=\"productCountColumnData\" :show-summary=\"true\" :table-list=\"productCountData\">\r\n      </da-table>\r\n    </da-panel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      meterForm: {\r\n        manageNo: \"\",\r\n        name: \"\",\r\n        address: \"\"\r\n      },\r\n      meterColumnData: [\r\n        {\r\n          label: \"管理编号\",\r\n          prop: \"manageNo\"\r\n        },\r\n        {\r\n          label: \"表计名称\",\r\n          prop: \"name\"\r\n        },\r\n        {\r\n          label: \"型号\",\r\n          prop: \"model\",\r\n          displace: {}\r\n        },\r\n        {\r\n          label: \"准确度等级\",\r\n          prop: \"accuracyLevel\"\r\n        },\r\n        {\r\n          label: \"生产厂家\",\r\n          prop: \"manufacturer\"\r\n        },\r\n        {\r\n          label: \"出厂编号\",\r\n          prop: \"manufacturerNo\",\r\n          width: \"110px\"\r\n        },\r\n        {\r\n          label: \"安装使用地点\",\r\n          prop: \"address\",\r\n          width: \"130px\"\r\n        },\r\n\r\n        {\r\n          label: \"安装日期\",\r\n          prop: \"installDate\",\r\n          format: \"YYYY-MM-DD\"\r\n        },\r\n        {\r\n          label: \"校验/校准日期\",\r\n          prop: \"checkDate\",\r\n          format: \"YYYY-MM-DD\"\r\n        },\r\n        {\r\n          label: \"检定证书编号\",\r\n          prop: \"checkNo\"\r\n        }\r\n      ],\r\n      meterData: [],\r\n      meterCountColumnData: [\r\n        {\r\n          label: \"表计类型\",\r\n          prop: \"meterType\",\r\n          displace: {}\r\n        },\r\n        {\r\n          label: \"合计\",\r\n          prop: \"meterCount\"\r\n        },\r\n        {\r\n          label: \"一级\",\r\n          prop: \"level_1\"\r\n        },\r\n        {\r\n          label: \"二级\",\r\n          prop: \"level_2\"\r\n        },\r\n        {\r\n          label: \"三级\",\r\n          prop: \"level_3\"\r\n        }\r\n      ],\r\n      meterCountData: [],\r\n      productCountColumnData: [\r\n        {\r\n          label: \"表计类型\",\r\n          prop: \"energyId\",\r\n          displace: {}\r\n        }\r\n      ],\r\n      productCountData: []\r\n    };\r\n  },\r\n  methods: {\r\n    loadData() {},\r\n    //获得表计详情\r\n    getMeterTable() {\r\n      this.$ajax\r\n        .get(\"rest/analysisData/meter\", {\r\n          params: {\r\n            title: \"表计查询\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\r\n            levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\r\n            isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\r\n            type: null, // - 计量种类，1能源,2非能源,为空表示全查\r\n            purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\r\n            isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\r\n            energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAll: true, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\r\n            isCount: false, // - 是否统计，可为空，为空表示不统计\r\n            groupBys: 1000000000 // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data.status) {\r\n            this.meterData = res.data.records;\r\n          }\r\n        });\r\n    },\r\n    //获得表计各级数量统计\r\n    getMeterCountData() {\r\n      this.$ajax\r\n        .get(\"rest/analysisData/meter\", {\r\n          params: {\r\n            title: \"表计各级数量统计\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\r\n            levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\r\n            isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\r\n            type: null, // - 计量种类，1能源,2非能源,为空表示全查\r\n            purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\r\n            isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\r\n            energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAll: false, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\r\n            isCount: true, // - 是否统计，可为空，为空表示不统计\r\n            groupBys: \"0100100000\" // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data.status) {\r\n            let tempData = [];\r\n            let tempIndex = [];\r\n            this.$each(res.data.records, item => {\r\n              if (item.energyId) {\r\n                let index = tempIndex.indexOf(item.energyId);\r\n                let value = item.num;\r\n                if (index === -1) {\r\n                  tempIndex.push(item.energyId);\r\n                  tempData.push({\r\n                    meterType: item.energyId,\r\n                    meterCount: 0,\r\n                    level_1: 0,\r\n                    level_2: 0,\r\n                    level_3: 0\r\n                  });\r\n                  index = tempIndex.length - 1;\r\n                }\r\n                tempData[index][\"level_\" + item.grade] += value;\r\n                tempData[index][\"meterCount\"] += value;\r\n              }\r\n            });\r\n            this.meterCountData = tempData;\r\n          }\r\n        });\r\n    },\r\n    //获得生产厂家统计\r\n    getProductCountData() {\r\n      this.$ajax\r\n        .get(\"rest/analysisData/meter\", {\r\n          params: {\r\n            title: \"生产厂家统计\", // - 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\r\n            levels: null, // - 计量级别，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            orgIds: null, // - 部门ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            equipIds: null, // - 设备ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            instrumentIds: null, // - 表计类型ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            entEnergyIds: null, // - 企业能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAutoCollect: null, // - 是否自动采集，为空表示不作为查询条件\r\n            isStopUse: null, // - 是否停用，true表示正常使用，false表示停用，为空时查询所有\r\n            type: null, // - 计量种类，1能源,2非能源,为空表示全查\r\n            purposes: null, // - 用能分类，1:主要生产系统,2:辅助生产系统,3:加工转换系统,4:附属损耗其它,为空表示全查\r\n            isInvented: null, // - 是否为虚拟点。1是，0否,为空表示全查\r\n            energyIds: null, // - 能源ID，为空表示不作为查询条件，多个用逗号隔开，如\"1,2,...\"\r\n            isAll: false, // - 是否全返回，true返回全部信息，false返回部分信息，不为统计时，id和name必返回，其余当为true时返回\r\n            isCount: true, // - 是否统计，可为空，为空表示不统计\r\n            groupBys: \"0000100001\" // - 按什么统计或是否显示，可为空，为空时表示显示所有， 不为空时isCount=true表示既统计又显示，isCount=false表示只显示， 1111111111（[部门][级别][设备][表计类型][能源][自动采集][停用][计量种类][用能分类][生产厂家]）\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data.status) {\r\n            let testData = [];\r\n            // testData.push({\r\n            //   name: \"LED实验室\",\r\n            //   manufacturerId: 7,\r\n            //   id: 18,\r\n            //   energyId: 23,\r\n            //   manufacturer: \"安科瑞\",\r\n            //   num: 62\r\n            // });\r\n            // testData.push({\r\n            //   name: \"LED实验室\",\r\n            //   manufacturerId: 8,\r\n            //   id: 28,\r\n            //   energyId: 35,\r\n            //   manufacturer: \"科陆\",\r\n            //   num: 58\r\n            // });\r\n            let manufacturer = [];\r\n            let arryData = [];\r\n            this.$each(res.data.records, item => {\r\n              if (item.manufacturerId) {\r\n                let index = arryData.indexOf(item.manufacturerId);\r\n                if (index === -1) {\r\n                  arryData.push({\r\n                    label: item.manufacturer,\r\n                    prop: \"id_\" + item.manufacturerId\r\n                  });\r\n                }\r\n              }\r\n            });\r\n            manufacturer = manufacturer.concat(arryData);\r\n            this.productCountColumnData = this.productCountColumnData.concat(\r\n              manufacturer\r\n            );\r\n            let tempData = [];\r\n            let tempIndex = [];\r\n            this.$each(res.data.records, item => {\r\n              if (item.energyId) {\r\n                let index = tempIndex.indexOf(item.energyId);\r\n                if (index === -1) {\r\n                  tempIndex.push(item.energyId);\r\n                  let tempArry = {};\r\n                  for (let i = 0; i < this.productCountColumnData.length; i++) {\r\n                    var key = this.productCountColumnData[i].prop;\r\n                    var value = \"\";\r\n                    tempArry[key] = value;\r\n                  }\r\n                  tempData.push(tempArry);\r\n                  index = tempIndex.length - 1;\r\n                  tempData[index][\"id_\" + item.manufacturerId] = item.num;\r\n                  tempData[index][\"energyId\"] = item.energyId;\r\n                }\r\n              }\r\n            });\r\n            this.productCountData = tempData;\r\n          }\r\n        });\r\n    },\r\n\r\n    search() {\r\n      this.$refs.meterTb.filterData(this.meterForm);\r\n    },\r\n    exportTable() {\r\n      this.$refs.meterTb.export(\"表计配备与台账\");\r\n    },\r\n    getMrterType() {\r\n      this.$ajax\r\n        .get(\"rest/analysisData/energy\", {\r\n          params: {\r\n            title: null, //- 功能块标题，作为返回值的一部分返回，用于识别具体是哪一个功能块调用该URI\r\n            orgIds: null, //- 部门ID，多个用逗号隔开，可为空，为空不作为查询条件\r\n            equipGroups: null, //- 设备分组ID，多个用逗号隔开，可为空，为空不作为查询条件\r\n            equipIds: null //- 设备ID，多个用逗号隔开，可为空，为空不作为查询条件\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data.status) {\r\n            let obj = {};\r\n            for (let i = 0; i < res.data.records.length; i++) {\r\n              var key = res.data.records[i].id;\r\n              var value = res.data.records[i].name;\r\n              obj[key] = value;\r\n            }\r\n            this.meterCountColumnData[0].displace = this.productCountColumnData[0].displace = obj;\r\n            this.getProductCountData();\r\n          }\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getMrterType();\r\n    this.getMeterTable();\r\n    this.getMeterCountData();\r\n    // this.getProductCountData();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/platform/energy/tabulationEquipmentLedger.vue?6ecc66ba","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@2.0.0@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-766e4971\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=styles&index=0!./tabulationEquipmentLedger.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=script&index=0!./tabulationEquipmentLedger.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-766e4971\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../../node_modules/_vue-loader@13.0.4@vue-loader/lib/selector?type=template&index=0!./tabulationEquipmentLedger.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-766e4971\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/platform/energy/tabulationEquipmentLedger.vue\n// module id = uJmW\n// module chunks = 30"],"sourceRoot":""}