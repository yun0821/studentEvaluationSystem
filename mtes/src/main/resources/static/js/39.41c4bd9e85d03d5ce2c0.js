webpackJsonp([39],{HnuM:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("da-manage-page",[a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{icon:"my-zengjia"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")])],1),e._v(" "),a("el-form",{attrs:{slot:"search",inline:!0,model:e.searchForm.formdata},slot:"search"},[a("el-form-item",{attrs:{label:"对象类型"}},[a("el-select",{attrs:{filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.searchForm.formdata.type,callback:function(t){e.$set(e.searchForm.formdata,"type",t)},expression:"searchForm.formdata.type"}},e._l(e.objectTypeData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用能对象"}},[a("el-input",{model:{value:e.searchForm.formdata.objectId,callback:function(t){e.$set(e.searchForm.formdata,"objectId",t)},expression:"searchForm.formdata.objectId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getTbList}},[e._v("查询")])],1)],1),e._v(" "),a("da-table",{ref:"table",attrs:{slot:"content",colums:e.colsData,"table-list":e.tableList,"search-data":e.searchForm,showSelection:!1},on:{callBack:e.getTbList},slot:"content"},[a("el-table-column",{attrs:{slot:"operation",property:"operation",label:"操作",width:"150",align:"center",fixed:"right"},slot:"operation",scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.editTb(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.delTb(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("da-dialog",{attrs:{title:e.title,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.closeDialog("addForm")}}},[a("el-form",{ref:"addForm",attrs:{"label-width":"90px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"对象类型",prop:"type"}},[a("el-select",{attrs:{"auto-complete":"off",filterable:"",size:"medium",placeholder:"请选择"},on:{change:e.changeType},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",t)},expression:"addForm.type"}},e._l(e.objectTypeData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用能对象",prop:"objectId"}},[a("el-select",{attrs:{"auto-complete":"off",filterable:"",size:"medium",placeholder:"请选择"},on:{change:e.changeObject},model:{value:e.addForm.objectId,callback:function(t){e.$set(e.addForm,"objectId",t)},expression:"addForm.objectId"}},e._l(e.useObjectData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数据项",prop:"meterItemId"}},[a("el-select",{attrs:{"auto-complete":"off",filterable:"",size:"medium",placeholder:"请选择"},model:{value:e.addForm.meterItemId,callback:function(t){e.$set(e.addForm,"meterItemId",t)},expression:"addForm.meterItemId"}},e._l(e.objectMeterItemData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"待机阈值",prop:"standbyThreshold"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.standbyThreshold,callback:function(t){e.$set(e.addForm,"standbyThreshold",t)},expression:"addForm.standbyThreshold"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"停机阈值",prop:"stopThreshold"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.stopThreshold,callback:function(t){e.$set(e.addForm,"stopThreshold",t)},expression:"addForm.stopThreshold"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveDialog("addForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],s={render:o,staticRenderFns:r};t.a=s},dnYC:function(e,t,a){"use strict";var o=a("3cXf"),r=a.n(o);t.a={name:"threshold",data:function(){return{objectTypeData:[],useObjectData:[],objectMeterItemData:[],searchForm:{formdata:{type:"",objectId:""},currentPage:1,pageSize:20},tableList:{},colsData:[{label:"对象类型",prop:"type",align:"left",sortable:!0},{label:"用能对象",prop:"objectId",align:"left",sortable:!0},{label:"数据项",prop:"meterItemId",align:"left",sortable:!0},{label:"待机阈值",prop:"standbyThreshold",align:"left",sortable:!0},{label:"停机阈值",prop:"stopThreshold",align:"left",sortable:!0}],dialogVisible:!1,addForm:{type:"",objectId:"",meterItemId:"",standbyThreshold:"",stopThreshold:""},rules:this.eachValidate({type:{required:!0,maxString:""},objectId:{required:!0,maxString:""},meterItemId:{required:!0,maxString:""},standbyThreshold:{maxString:""},stopThreshold:{maxString:""}})}},computed:{title:function(){return this.addForm.id?"编辑运行状态参数配置":"新增运行状态参数配置"},urlType:function(){return this.addForm.id?"put":"post"}},watch:{},methods:{getUseEnergyObjectType:function(){var e=this;this.$ajax.get("rest/threshold/objectType").then(function(t){t.data.status&&(e.objectTypeData=t.data.records)})},getUseEnergyObject:function(){var e=this;this.$ajax.get("rest/threshold/object",{params:{objectType:this.addForm.type}}).then(function(t){t.data.status&&(e.useObjectData=t.data.records)})},getUseObjectMeterItem:function(){var e=this;this.$ajax.get("rest/threshold/meterItem",{params:{objectType:this.addForm.type,objectId:this.addForm.objectId}}).then(function(t){t.data.status&&(e.objectMeterItemData=t.data.records)})},getTbList:function(){var e=this;this.$ajax.get("rest/threshold/page",{params:this.searchForm,loadingTarget:this.$refs.table.table}).then(function(t){t.data.status&&(e.tableList=t.data)})},editTb:function(e){this.dialogVisible=!0,this.addForm=JSON.parse(r()(e))},closeDialog:function(e){this.$nextTick(function(){this.$refs[e].resetFields(),this.addForm={type:"",objectId:"",meterItemId:"",standbyThreshold:"",stopThreshold:""}})},saveDialog:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$ajax[t.urlType]("rest/threshold",t.addForm).then(function(e){e.data.status?(t.$message.success(e.data.answerMsg),t.dialogVisible=!1,t.getTbList()):t.$message.error(e.data.answerMsg)})})},delTb:function(e){var t=this;this.$confirm("是否删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.delete("rest/threshold",{params:{id:e.id}}).then(function(e){e.data.status?(t.$message.success(e.data.answerMsg),t.getTbList()):t.$message.error(e.data.answerMsg)})})},changeType:function(){this.getUseEnergyObject()},changeObject:function(){this.getUseObjectMeterItem()}},mounted:function(){this.getUseEnergyObjectType(),this.getUseEnergyObject(),this.getUseObjectMeterItem(),this.getTbList()}}},ztS3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("dnYC"),r=a("HnuM"),s=a("J0+h"),l=s(o.a,r.a,null,null,null);t.default=l.exports}});
//# sourceMappingURL=39.41c4bd9e85d03d5ce2c0.js.map